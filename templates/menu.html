{% extends "layout.html" %}

{% block title %}Menu{% endblock %}

{% block content %}

<header class="page-header">
    <h1>Menu</h1>
</header>

<main>
    <!-- Sekme butonları -->
    <nav class="tab-nav" id="vip-filters">
        <a href="#" class="tab-item active" data-filter="all">All</a>
        {% for level in levels %}
            <a href="#" class="tab-item" data-filter="{{ level.level }}">VIP {{ level.level }}</a>
        {% endfor %}
    </nav>

    <!-- VIP seviyelerinin listelendiği alan -->
    <div class="vip-list-new content">
        {% for level in levels %}
        <a href="{{ url_for('task_detail', level_id=level.level) }}" 
           class="vip-level-card-new" 
           data-level="{{ level.level }}">
           
            <div class="logo-container">
                <img src="{{ level.logo_url }}" alt="{{ level.name }} Logo">
            </div>

            <div class="vip-info">
                <span class="vip-badge-label">VIP {{ level.level }}</span>
                <h3>{{ level.name }}</h3>
                <p class="balance-range">
                    Available balance: 
                    {% if level.max_balance and level.max_balance > 0 %}
                        {{ "%.0f"|format(level.min_balance) }}USDT-{{ "%.0f"|format(level.max_balance) }} USDT
                    {% else %}
                        ≥{{ "%.0f"|format(level.min_balance) }} USDT
                    {% endif %}
                </p>
            </div>

            <div class="vip-commission">
                <p>Commissions: <span>{{ "%.0f"|format(level.commission_rate) }}%</span></p>
            </div>
        </a>
        {% else %}
        <p class="no-data-message">No VIP levels found.</p>
        {% endfor %}
        <p class="no-data-message" style="margin-top: 20px;">No more</p>
    </div>
</main>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const filters = document.querySelectorAll('#vip-filters .tab-item');
        const cards = document.querySelectorAll('.vip-level-card-new');

        filters.forEach(filter => {
            filter.addEventListener('click', function(event) {
                event.preventDefault();

                filters.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');

                const filterValue = this.getAttribute('data-filter');

                cards.forEach(card => {
                    if (filterValue === 'all' || card.getAttribute('data-level') === filterValue) {
                        card.style.display = 'flex';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });
    });
</script>
{% endblock %}
