{% extends "layout.html" %}
{% block title %}Arkadaşlarını Davet Et{% endblock %}
{% block content %}
<main>
    <header class="page-header">
        <a href="{{ url_for('mine') }}" class="back-arrow"><i class="fas fa-chevron-left"></i></a>
        <h1>Invite friends</h1>
    </header>
    <div class="invite-container content">
        <p class="code-label">My invitation code</p>
        <h2 class="invitation-code">{{ user.invitation_code }}</h2>
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data={{ url_for('register', _external=True) }}?code={{ user.invitation_code }}" alt="QR Code" class="qr-code">
        <p class="qr-note">Long press to save the QR code</p>
        <div class="share-link-box">
            <div>
                <span>Share link</span>
                <a href="#" class="copy-button" onclick="copyLink(event)">Copy</a>
            </div>
            <p class="share-link-url" id="share-link">{{ url_for('register', _external=True) }}?code={{ user.invitation_code }}</p>
        </div>
    </div>
</main>
<script>
    function copyLink(event) {
        event.preventDefault();
        const linkText = document.getElementById('share-link').innerText;
        navigator.clipboard.writeText(linkText).then(function() {
            alert('Link kopyalandı!');
        }, function(err) {
            alert('Kopyalama başarısız oldu.');
        });
    }
</script>
{% endblock %}